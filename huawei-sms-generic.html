<script type="text/javascript">
  RED.nodes.registerType("huawei-sms-generic", {
    category: "huawei-sms",
    paletteLabel: "Generic API call",
    color: '#F4A7B9',
    icon: "font-awesome/fa-code",
    defaults: {
      name: {value: ""},
      url: {value: "device/signal", required: true, validate: RED.validators.regex(/^[a-zA-Z][a-zA-Z-/]*$/)},
      method: {value: "GET"},
      config: {value: "", type: "huawei-sms-config"}
    },
    inputs: 1,
    outputs: 1,
    label: function() {
      return this.name || "Generic API call";
    }
  });
</script>

<script type="text/html" data-template-name="huawei-sms-generic">
  <div class="form-row">
    <label for="node-input-config">Config</label>
    <input type="text" id="node-input-config">
  </div>
  <div class="form-row">
    <label for="node-input-url">URL /api/</label>
    <input type="text" id="node-input-url">
  </div>
  <div class="form-row">
    <label for="node-input-method">Method</label>
    <select id="node-input-method">
        <option value="GET">GET</option>
        <option value="POST">POST</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-name">Name</label>
    <input type="text" type="text" id="node-input-name">
  </div>
</script>

<script type="text/html" data-help-name="huawei-sms-generic">
  <p>This module is used to send custom requests to the API of a Huawei LTE USB Stick.</p>
  <p>Specify the URL without a leading slash. The entered value will automatically be prefixed with `/api/`.</p>
  <p>If the POST method is selected, <code>msg.payload</code> must contain an XML string with a root &lt;request&gt; element.</p>
  <p>The outgoing <code>msg.payload</code> will contain the module's response as an XML string.</p> 
</script>
